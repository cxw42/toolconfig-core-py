<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>toolconfig_core.ecpy.ini &#8212; toolconfig-core 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=659b1fac" />
    <link rel="stylesheet" type="text/css" href="../../../_static/haiku.css?v=d31ea6cb" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=f6245a2f"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../../index.html">
          <span>toolconfig-core 0.0.1 documentation</span></a></h1>
        <h2 class="heading"><span>toolconfig_core.ecpy.ini</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="../../../index.html">Contents</a>
        </p>

      </div>
      <div class="content" role="main">
        
        
  <h1>Source code for toolconfig_core.ecpy.ini</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;EditorConfig file parser</span>

<span class="sd">Based on code from ConfigParser.py file distributed with Python 2.6.</span>

<span class="sd">Licensed under PSF License (see LICENSE.PSF file).</span>

<span class="sd">Changes to original ConfigParser:</span>

<span class="sd">- Special characters can be used in section names</span>
<span class="sd">- Octothorpe can be used for comments (not just at beginning of line)</span>
<span class="sd">- Only track INI options in sections that match target filename</span>
<span class="sd">- Stop parsing files with when ``root = true`` is found</span>
<span class="sd">- Add EditorConfigFile</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">posixpath</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">codecs</span> <span class="kn">import</span> <span class="nb">open</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">sep</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">normpath</span>

<span class="kn">from</span> <span class="nn">toolconfig_core.ecpy.compat</span> <span class="kn">import</span> <span class="n">u</span>
<span class="kn">from</span> <span class="nn">toolconfig_core.ecpy.exceptions</span> <span class="kn">import</span> <span class="n">ParsingError</span>
<span class="kn">from</span> <span class="nn">toolconfig_core.ecpy.fnmatch</span> <span class="kn">import</span> <span class="n">fnmatch</span>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ParsingError&quot;</span><span class="p">,</span> <span class="s2">&quot;EditorConfigParser&quot;</span><span class="p">]</span>

<span class="n">MAX_SECTION_LENGTH</span> <span class="o">=</span> <span class="mi">4096</span>
<span class="n">MAX_PROPERTY_LENGTH</span><span class="o">=</span> <span class="mi">50</span>
<span class="n">MAX_VALUE_LENGTH</span> <span class="o">=</span> <span class="mi">255</span>


<div class="viewcode-block" id="EditorConfigParser"><a class="viewcode-back" href="../../../toolconfig_core.ecpy.html#toolconfig_core.ecpy.ini.EditorConfigParser">[docs]</a><span class="k">class</span> <span class="nc">EditorConfigParser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parser for EditorConfig-style configuration files</span>

<span class="sd">    Based on RawConfigParser from ConfigParser.py in Python 2.6.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Regular expressions for parsing section headers and options.</span>
    <span class="c1"># Allow ``]`` and escaped ``;`` and ``#`` characters in section headers</span>
    <span class="n">SECTCRE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        \s *                                # Optional whitespace</span>
<span class="sd">        \[                                  # Opening square brace</span>

<span class="sd">        (?P&lt;header&gt;                         # One or more characters excluding</span>
<span class="sd">            ( [^\#;] | \\\# | \\; ) +       # unescaped # and ; characters</span>
<span class="sd">        )</span>

<span class="sd">        \]                                  # Closing square brace</span>

<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span>
    <span class="p">)</span>
    <span class="c1"># Regular expression for parsing option name/values.</span>
    <span class="c1"># Allow any amount of whitespaces, followed by separator</span>
    <span class="c1"># (either ``:`` or ``=``), followed by any amount of whitespace and then</span>
    <span class="c1"># any characters to eol</span>
    <span class="n">OPTCRE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        \s *                                # Optional whitespace</span>
<span class="sd">        (?P&lt;option&gt;                         # One or more characters excluding</span>
<span class="sd">            [^:=\s]                         # : a = characters (and first</span>
<span class="sd">            [^:=] *                         # must not be whitespace)</span>
<span class="sd">        )</span>
<span class="sd">        \s *                                # Optional whitespace</span>
<span class="sd">        (?P&lt;vi&gt;</span>
<span class="sd">            [:=]                            # Single = or : character</span>
<span class="sd">        )</span>
<span class="sd">        \s *                                # Optional whitespace</span>
<span class="sd">        (?P&lt;value&gt;</span>
<span class="sd">            . *                             # One or more characters</span>
<span class="sd">        )</span>
<span class="sd">        $</span>

<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root_file</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="EditorConfigParser.matches_filename"><a class="viewcode-back" href="../../../toolconfig_core.ecpy.html#toolconfig_core.ecpy.ini.EditorConfigParser.matches_filename">[docs]</a>    <span class="k">def</span> <span class="nf">matches_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_filename</span><span class="p">,</span> <span class="n">glob</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if section glob matches filename&quot;&quot;&quot;</span>
        <span class="n">config_dirname</span> <span class="o">=</span> <span class="n">normpath</span><span class="p">(</span><span class="n">dirname</span><span class="p">(</span><span class="n">config_filename</span><span class="p">))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">sep</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="n">glob</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">#&quot;</span><span class="p">,</span> <span class="s2">&quot;#&quot;</span><span class="p">)</span>
        <span class="n">glob</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">;&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;/&#39;</span> <span class="ow">in</span> <span class="n">glob</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">glob</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">glob</span> <span class="o">=</span> <span class="n">glob</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">glob</span> <span class="o">=</span> <span class="n">posixpath</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">config_dirname</span><span class="p">,</span> <span class="n">glob</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glob</span> <span class="o">=</span> <span class="n">posixpath</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;**/&#39;</span><span class="p">,</span> <span class="n">glob</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fnmatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">glob</span><span class="p">)</span></div>

<div class="viewcode-block" id="EditorConfigParser.read"><a class="viewcode-back" href="../../../toolconfig_core.ecpy.html#toolconfig_core.ecpy.ini.EditorConfigParser.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ec_filename</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read and parse single EditorConfig file&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">ec_filename</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_read</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">ec_filename</span><span class="p">)</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">fpname</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse a sectioned setup file.</span>

<span class="sd">        The sections in setup file contains a title line at the top,</span>
<span class="sd">        indicated by a name in square brackets (`[]&#39;), plus key/value</span>
<span class="sd">        options lines, indicated by `name: value&#39; format lines.</span>
<span class="sd">        Continuations are represented by an embedded newline then</span>
<span class="sd">        leading whitespace.  Blank lines, lines beginning with a &#39;#&#39;,</span>
<span class="sd">        and just about everything else are ignored.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">in_section</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">matching_section</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">optname</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">lineno</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">e</span> <span class="o">=</span> <span class="kc">None</span>                                  <span class="c1"># None, or an exception</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="n">lineno</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">u</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\ufeff</span><span class="s1">&#39;</span><span class="p">)):</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># Strip UTF-8 BOM</span>
            <span class="n">lineno</span> <span class="o">=</span> <span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="c1"># comment or blank line?</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;#;&#39;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># a section header or option header?</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># is it a section header?</span>
                <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SECTCRE</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">mo</span><span class="p">:</span>
                    <span class="n">sectname</span> <span class="o">=</span> <span class="n">mo</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;header&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sectname</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">MAX_SECTION_LENGTH</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="n">in_section</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">matching_section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matches_filename</span><span class="p">(</span><span class="n">fpname</span><span class="p">,</span> <span class="n">sectname</span><span class="p">)</span>
                    <span class="c1"># So sections can&#39;t start with a continuation line</span>
                    <span class="n">optname</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="c1"># an option line?</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">mo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">OPTCRE</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">mo</span><span class="p">:</span>
                        <span class="n">optname</span><span class="p">,</span> <span class="n">vi</span><span class="p">,</span> <span class="n">optval</span> <span class="o">=</span> <span class="n">mo</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;option&#39;</span><span class="p">,</span> <span class="s1">&#39;vi&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="s1">&#39;;&#39;</span> <span class="ow">in</span> <span class="n">optval</span> <span class="ow">or</span> <span class="s1">&#39;#&#39;</span> <span class="ow">in</span> <span class="n">optval</span><span class="p">:</span>
                            <span class="c1"># &#39;;&#39; and &#39;#&#39; are comment delimiters only if</span>
                            <span class="c1"># preceeded by a spacing character</span>
                            <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;(.*?) [;#]&#39;</span><span class="p">,</span> <span class="n">optval</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
                                <span class="n">optval</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                        <span class="n">optval</span> <span class="o">=</span> <span class="n">optval</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="c1"># allow empty values</span>
                        <span class="k">if</span> <span class="n">optval</span> <span class="o">==</span> <span class="s1">&#39;&quot;&quot;&#39;</span><span class="p">:</span>
                            <span class="n">optval</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                        <span class="n">optname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionxform</span><span class="p">(</span><span class="n">optname</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">optname</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">MAX_PROPERTY_LENGTH</span> <span class="ow">or</span>
                            <span class="nb">len</span><span class="p">(</span><span class="n">optval</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">MAX_VALUE_LENGTH</span><span class="p">):</span>
                            <span class="k">continue</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">in_section</span> <span class="ow">and</span> <span class="n">optname</span> <span class="o">==</span> <span class="s1">&#39;root&#39;</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">root_file</span> <span class="o">=</span> <span class="p">(</span><span class="n">optval</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">matching_section</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="n">optname</span><span class="p">]</span> <span class="o">=</span> <span class="n">optval</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># a non-fatal parsing error occurred.  set up the</span>
                        <span class="c1"># exception but keep going. the exception will be</span>
                        <span class="c1"># raised at the end of the file and will contain a</span>
                        <span class="c1"># list of all bogus lines</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">e</span><span class="p">:</span>
                            <span class="n">e</span> <span class="o">=</span> <span class="n">ParsingError</span><span class="p">(</span><span class="n">fpname</span><span class="p">)</span>
                        <span class="n">e</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lineno</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
        <span class="c1"># if any parsing errors occurred, raise an exception</span>
        <span class="k">if</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

<div class="viewcode-block" id="EditorConfigParser.optionxform"><a class="viewcode-back" href="../../../toolconfig_core.ecpy.html#toolconfig_core.ecpy.ini.EditorConfigParser.optionxform">[docs]</a>    <span class="k">def</span> <span class="nf">optionxform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">optionstr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">optionstr</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></div></div>

<span class="k">class</span> <span class="nc">EditorConfigFile</span><span class="p">(</span><span class="n">EditorConfigParser</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A .editorconfig file.</span>

<span class="sd">    Args:</span>
<span class="sd">        ec_filename: The full path to the EditorConfig file to read</span>

<span class="sd">    Raises:</span>
<span class="sd">        OSError: if the file doesn&#39;t exist</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ec_filename</span><span class="p">):</span>
        <span class="n">placeholder_filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\0</span><span class="s2">&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">placeholder_filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_exists</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ec_filename</span> <span class="o">=</span> <span class="n">ec_filename</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">ec_filename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Record the fact that the file exists.</span>

<span class="sd">        Do this here so that, after a settings_for() call, we know</span>
<span class="sd">        for sure whether the file existed at read time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_read</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_exists</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ec_filename</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read the file, throwing if it&#39;s absent.</span>

<span class="sd">        Raises:</span>
<span class="sd">            OSError: if the EC file doesn&#39;t exist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ec_filename</span> <span class="o">=</span> <span class="n">ec_filename</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">ec_filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_exists</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">ec_filename</span><span class="si">}</span><span class="s2"> doesn&#39;t exist&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">settings_for</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_path</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the settings for target_path, which may or may not exist.</span>

<span class="sd">        Args:</span>
<span class="sd">            target_path (str): Absolute path</span>

<span class="sd">        Raises:</span>
<span class="sd">            OSError: If the EditorConfig file passed to __init__() does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">target_path</span>

        <span class="c1"># Reset before reading --- start fresh with each call.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root_file</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_exists</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ec_filename</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span>
</pre></div>

      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="../../../index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2023, EditorConfig Team, including Hong Xu, Trey Hunner, and Christopher White.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.1.
    </div>
  </body>
</html>